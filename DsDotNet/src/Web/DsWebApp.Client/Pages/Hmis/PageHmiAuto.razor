@* PageHmiAuto *@

@page "/hmis/auto"
<h3>자동 조작</h3>

@using System.Collections.ObjectModel
@using Engine.Core
@using static Engine.Core.TagWebModule
@using HMIButton = Tuple<Engine.Core.TagWebModule.TagWeb, Engine.Core.TagWebModule.TagWeb>  @* HMIPush * HMIFlickerLamp *@
@inherits CompHmiLoader
@implements IDisposable
@attribute [Authorize(Roles = "Administrator")]


@if (_loading)
{
    <p><em>Loading...</em></p>
}
else
{
    <p>
        <CompHmiWidgetPushButton Text="Auto"     DataItem="@(_system.GetAuto())"     TagGetter="@_tagGetter" />
        <CompHmiWidgetPushButton Text="Manual"   DataItem="@(_system.GetManual())"   TagGetter="@_tagGetter" />

        <CompHmiWidgetPushButton Text="Ready"    DataItem="@(_system.ReadyPush)"     TagGetter="@_tagGetter" />
        <CompHmiWidgetPushButton Text="Drive"    DataItem="@(_system.DrivePush)"     TagGetter="@_tagGetter" />
        <CompHmiWidgetPushButton Text="Home"     DataItem="@(_system.HomePush)"      TagGetter="@_tagGetter" />
        <CompHmiWidgetPushButton Text="Clear"    DataItem="@(_system.ClearPush)"     TagGetter="@_tagGetter" />
        <CompHmiWidgetPushButton Text="Stop"     DataItem="@(_system.StopPush)"      TagGetter="@_tagGetter" />
        <CompHmiWidgetPushButton Text="Em Stop"  DataItem="@(_system.EmergencyPush)" TagGetter="@_tagGetter" />
        <CompHmiWidgetPushButton Text="Test"     DataItem="@(_system.TestPush)"      TagGetter="@_tagGetter" />
    </p>

    <CompHmiFlowTable Flows="@_system.Flows"/>
}


@code {
    TagWeb _tagGetter(object dataItem) => (TagWeb)dataItem;
    // protected override async Task OnInitializedAsync()
    // {
    //     await base.OnInitializedAsync();
    // }
    public void Dispose()
    {
        Console.WriteLine($"Disposing PageHmiAuto.razor");
    }
}