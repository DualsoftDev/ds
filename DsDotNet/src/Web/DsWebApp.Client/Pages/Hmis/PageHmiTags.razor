@page "/hmis/tags"
@using System.Collections.ObjectModel
@using static Engine.Core.TagWebModule
@using HMIButton = Tuple<Engine.Core.TagWebModule.TagWeb, Engine.Core.TagWebModule.TagWeb>  @* HMIPush * HMIFlickerLamp *@

<h3>PageHmiTags</h3>

@if (_loading)
{
    <p><em>Loading...</em></p>
}
else
{
    @if (_hmiTagPackage.AutoButtons.Any())
    {
        <CompHmiButtonTable TableName="Auto Buttons" HMIButtons=_hmiTagPackage.AutoButtons />
    }

    @if (_hmiTagPackage.ManualButtons.Any())
    {
        <CompHmiButtonTable TableName="Manual Buttons" HMIButtons=_hmiTagPackage.ManualButtons />
    }

    @if (_hmiTagPackage.DriveButtons.Any())
    {
        <CompHmiButtonTable TableName="Drive Buttons" HMIButtons=_hmiTagPackage.DriveButtons />
    }

    @if (_hmiTagPackage.StopButtons.Any())
    {
        <CompHmiButtonTable TableName="Stop Buttons" HMIButtons=_hmiTagPackage.StopButtons />
    }

    @if (_hmiTagPackage.ClearButtons.Any())
    {
        <CompHmiButtonTable TableName="Clear Buttons" HMIButtons=_hmiTagPackage.ClearButtons />
    }

    @if (_hmiTagPackage.EmergencyButtons.Any())
    {
        <CompHmiButtonTable TableName="Emergency Buttons" HMIButtons=_hmiTagPackage.EmergencyButtons />
    }

    @if (_hmiTagPackage.TestButtons.Any())
    {
        <CompHmiButtonTable TableName="Test Buttons" HMIButtons=_hmiTagPackage.TestButtons />
    }

    @if (_hmiTagPackage.HomeButtons.Any())
    {
        <CompHmiButtonTable TableName="Home Buttons" HMIButtons=_hmiTagPackage.HomeButtons />
    }

    @if (_hmiTagPackage.ReadyButtons.Any())
    {
        <CompHmiButtonTable TableName="Ready Buttons" HMIButtons=_hmiTagPackage.ReadyButtons />
    }

    @if (_hmiTagPackage.DeviceBtns.Any())
    {
        <CompDeviceButtonTable TableName="Device Buttons" HMIDevices=_hmiTagPackage.DeviceBtns />
    }

    @if (_hmiTagPackage.RealBtns.Any())
    {
        <CompRealButtonTable TableName="Real Buttons" RealButtons=_hmiTagPackage.RealBtns />
    }
}


@code {
    bool _loading { get; set; } = true;
    HmiTagPackage _hmiTagPackage;

    protected override async Task OnInitializedAsync()
    {
        _hmiTagPackage = ClientGlobal.HmiTagPackage;
        if (_hmiTagPackage == null)
            ClientGlobal.HmiTagPackage = _hmiTagPackage = await Http.GetFromJsonAsync<HmiTagPackage>($"api/hmitag");

        _loading = false;
        await base.OnInitializedAsync();
    }
    public void Dispose() 
    {
        Console.WriteLine($"Disposing PageHmiTags.razor");
    }
}