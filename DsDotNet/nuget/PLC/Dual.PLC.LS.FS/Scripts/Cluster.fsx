#r "nuget: Log4Net" 
#r "nuget: FSharpPlus" 

#I @"..\bin\Debug\net47"
#r @"F:\Git\dual\common\PLCInterface\Dsu.PLC\bin\netcoreapp3.1\Dual.Common.FS.dll"
#r "Dual.PLC.Common.dll"
#r "Dsu.PLC.LS.dll"
open FSharpPlus
open AddressConvert
open Cluster

[1..10] @ [17..2..22] @ [253..7..270] @ [512; 527; 588] @ [1234..1..1240] @ [1700; 1701]    // [1; 2; 3; 4; 5; 6; 7; 8; 9; 10; 17; 19; 21; 253; 260; 267; 512; 527; 588; 1234; 1235; 1236; 1237; 1238; 1239; 1240; 1700; 1701]
|> List.pairwise    // [(1, 2); (2, 3); (3, 4); (4, 5); (5, 6); (6, 7); (7, 8); (8, 9); (9, 10);
   //(10, 17); (17, 19); (19, 21); (21, 253); (253, 260); (260, 267); (267, 512);
   //(512, 527); (527, 588); (588, 1234); (1234, 1235); (1235, 1236);
   //(1236, 1237); (1237, 1238); (1238, 1239); (1239, 1240); (1240, 1700);
   //(1700, 1701)]
|> List.map (fun (a, b) -> b - a)   // [1; 1; 1; 1; 1; 1; 1; 1; 1; 7; 2; 2; 232; 7; 7; 245; 15; 61; 646; 1; 1; 1; 1; 1; 1; 460; 1]
|> List.scan (fun a b -> a + b) 0   // [0; 1; 2; 3; 4; 5; 6; 7; 8; 9; 16; 18; 20; 252; 259; 266; 511; 526; 587; 1233; 1234; 1235; 1236; 1237; 1238; 1239; 1699; 1700]



[1500..1..1505] @ [1600..2..1620] @ [1728..5..1745] @ [3400; 3401]
|> List.pairwise
|> List.map (fun (a, b) -> b - a)
|> List.scan (fun a b -> a + b) 0





[11; 12; 1500] @ [1600..2..1620] @ [1728..5..1745] @ [3400; 3401]
|> List.pairwise
//|> List.map (fun (a, b) -> b - a)
//|> List.scan (fun a b -> a + b) 0       // [0; 1; 1489; 1589; ...





let a = 
    [11; 12; 50] @ [55..2..70] @ [200..5..230]
    |> List.indexed
[11; 12; 50] @ [55..2..70] @ [200..5..230]
|> scanBytes

[11; 12; 1500] @ [1600..2..1630] @ [1728..5..1745]
|> List.pairwise
|> List.map (fun (a, b) -> b - a)
|> List.scan (fun a b -> a + b) 0


[1..10] @ [17..2..22] @ [253..7..270] @ [512; 527; 588] @ [1234..1..1240] @ [1700; 1701]
|> scanBytes









>  [| 1; 2; 3; 4; 5 |].[0..];;
val it : int [] = [|1; 2; 3; 4; 5|]

>  [| 1; 2; 3; 4; 5 |].[..3];;
val it : int [] = [|1; 2; 3; 4|]

> [| 1; 2; 3; 4; 5 |].[2..4];;
val it : int [] = [|3; 4; 5|]


