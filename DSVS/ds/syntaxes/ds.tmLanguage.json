{
  "name": "ds",
  "scopeName": "source.ds",
  "fileTypes": [
    "ds",
    "ds"
  ],
  "foldingStartMarker": "\\{\\s*$",
  "foldingStopMarker": "^\\s*\\}",
  "variables": {
    "whitespace": "[^\\S\\n\\r]",
    "accSRE": "accSRE|accSR|accRE|accSE|accS|accR|accE"
  },
  "patterns": [
    {
      "include": "#comments"
    },
    {
      "include": "#definitions"
    },
    {
      "include": "#segments"
    },
    {
      "include": "#sample_keywords"
    },
    {
      "include": "#segment"
    },
    {
      "include": "#properties"
    },
    {
      "include": "#dquoted"
    }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.block.ds",
          "begin": "(/\\*)",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.comment.ink"
            }
          },
          "end": "(\\*/)",
          "endCaptures": {
            "1": {
              "name": "punctuation.definition.comment.ink"
            }
          }
        },
        {
          "name": "comment.line.ds",
          "begin": "(\\/\\/)",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.comment.ink"
            }
          },
          "end": "(?=$)"
        }
      ]
    },
    "properties": {
      "patterns": [
        {
          "name": "punctuation.definition.macro1111.ds",
          "begin": "(?:\\[\\s*)(macro)\\s*=\\s*([^\\]]*)",
          "beginCaptures": {
            "1": {
              "name": "keyword.control.macro2"
            },
            "2": {
              "name": "keyword.control.macro3"
            }
          },
          "end": "(?:\\])"
        },
        {
          "name": "punctuation.definition.macro.ds",
          "begin": "(?:\\[)",
          "end": "(?:\\])",
          "patterns": [
            {
              "name": "keyword.control.macro1.ds",
              "match": "(Sys|accSRE|accSR|accRE|accSE|accS|accR|accE|macro)"
            }
          ]
        },
        {
          "name": "keyword.control.macro2.ds",
          "begin": "(\\[)",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.macro.start.ds"
            }
          },
          "end": "(\\])",
          "endCaptures": {
            "1": {
              "name": "punctuation.definition.macro.end.ds"
            }
          },
          "patterns": [
            {
              "include": "#segment"
            }
          ]
        }
      ]
    },
    "macro_assignment": {
      "patterns": [
        {
          "name": "keyword.control.macro.assignment.ds",
          "match": "{{segments}\\s*={{segments}}"
        }
      ]
    },
    "sample_keywords": {
      "patterns": [
        {
          "name": "keyword.control.my.ds",
          "match": "\\b(if|while|for|return)\\b"
        }
      ]
    },
    "segment": {
      "patterns": [
        {
          "name": "variable.other.segment.withdot.ds",
          "match": "\\b[a-zA-Z_][a-zA-Z_0-9]*\\.[a-zA-Z_][a-zA-Z_0-9]*\\b"
        },
        {
          "name": "variable.other.segment.ds",
          "match": "\\b[a-zA-Z_][a-zA-Z_0-9]*\\b"
        },
        {
          "name": "invalid.illegal.expected-array-separator.json",
          "match": "[^\\s\\{\\};=<>\\|&~\\(\\)]"
        }
      ]
    },
    "segments": [
      {
        "name": "meta.structure.array.ds",
        "begin": "(\\{)",
        "beginCaptures": {
          "1": {
            "name": "punctuation.definition.macro.start.ds"
          }
        },
        "end": "(\\})",
        "endCaptures": {
          "1": {
            "name": "punctuation.definition.macro.end.ds"
          }
        },
        "patterns": [
          {
            "name": "punctuation.separator.array.ds",
            "match": ";"
          },
          {
            "name": "invalid.illegal.expected-array-separator.json",
            "match": "[^\\s\\]]"
          },
          {
            "include": "#comments"
          },
          {
            "include": "#segment"
          }
        ]
      }
    ],
    "definitions": {
      "patterns": [
        {
          "include": "#properties"
        },
        {
          "name": "punctuation.separator.define.ds"
        },
        {
          "match": "{{properties}}{{segment}}\\s*={{segments}}\\b"
        },
        {
          "include": "#segments"
        }
      ]
    },
    "dquoted": {
      "patterns": [
        {
          "name": "string.quoted.double.untitled",
          "begin": "(\")",
          "end": "(\")",
          "patterns": [
            {
              "name": "constant.character.escape.untitled",
              "match": "\\\\."
            }
          ]
        }
      ]
    }
  }
}