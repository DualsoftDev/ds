@* PageHmiAuto *@

@page "/hmis/auto"

<CompTooltipInlineHidden>
    <NormalContent>
        <CompTitle Icon="oi oi-bolt" Title="자동 조작" />
    </NormalContent>
    <TooltipContent>
        <RadzenAlert AlertStyle="AlertStyle.Info" Variant="Variant.Flat" Icon="auto_awesome" Shade="Shade.Lighter">
            <RadzenText TextStyle="TextStyle.H6" style="color: var(--rz-on-info-lighter);">자동 조작</RadzenText>
            <p> Clear > Ready 후, Auto 나 Manual 누르면 선택 확인</p>
        </RadzenAlert>
    </TooltipContent>
</CompTooltipInlineHidden>

@using System.Collections.ObjectModel
@using Engine.Core
@using static Engine.Core.TagWebModule
@inherits CompHmiLoader
@implements IDisposable
@attribute [Authorize(Roles = "Administrator")]

@* https://supportcenter.devexpress.com/ticket/details/t1017286/datagrid-for-blazor-how-to-set-the-100-height *@
<CompFullScreenManager FullScreenElementId="auto" />      @* FullScreenStateChanged="@onFullScreenStateChanged" *@

@if (_loading)
{
    <p><em>Loading...</em></p>
}
else
{
    <div id="auto" class="ds-inline">
        <p>
            <div class="ds-inline">
                <AutoManualSelector Selector="_system.AutoManualSelectLamp" />
            </div>
            <WgtGridPbLamp Text="Ready" DataItem="@(_system.ReadyPushLamp)" ButtonLampGetter="@_buttonLampGetter" />
            <WgtGridPbLamp Text="Drive" DataItem="@(_system.DrivePushLamp)" ButtonLampGetter="@_buttonLampGetter" />
            <WgtGridPbLamp Text="Home" DataItem="@(_system.HomePushLamp)" ButtonLampGetter="@_buttonLampGetter" />
            <WgtGridPbLamp Text="Clear" DataItem="@(_system.ClearPushLamp)" ButtonLampGetter="@_buttonLampGetter" />
            <WgtGridPbLamp Text="Stop" DataItem="@(_system.StopPushLamp)" ButtonLampGetter="@_buttonLampGetter" />
            <WgtGridPbLamp Text="Em Stop" DataItem="@(_system.EmergencyPushLamp)" ButtonLampGetter="@_buttonLampGetter" />
            <WgtGridPbLamp Text="Test" DataItem="@(_system.TestPushLamp)" ButtonLampGetter="@_buttonLampGetter" />
        </p>

        <CompHmiFlowTable Flows="@_system.Flows" />
    </div>
}


@code {
    CsHMIPushLamp _buttonLampGetter(object dataItem) => (CsHMIPushLamp)dataItem;

    // protected override async Task OnInitializedAsync()
    // {
    //     await base.OnInitializedAsync();
    // }
    public void Dispose()
    {
        Console.WriteLine($"Disposing PageHmiAuto.razor");
    }
}

<style>
    .ds-inline {
        display: inline-block; /* 또는 'inline'을 사용할 수 있습니다 */
    }
</style>